<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Puzzle</title>

<style>
body { font-family: system-ui; text-align: center; margin: 0; padding: 10px; }
button { padding: 10px 18px; margin: 6px; font-size: 16px; }
.hidden { display: none; }

#grid {
  display: grid;
  grid-template-columns: repeat(14, 1fr);
  gap: 4px;
  max-width: 95vw;
  margin: 20px auto;
}
.cell {
  background: #eee;
  padding: 10px 0;
  font-weight: bold;
  user-select: none;
}
</style>
</head>

<body>

<h1>Word Puzzle</h1>

<div id="menu">
  <button onclick="startGame()">åœ‹ä¸­æœƒè€ƒ</button>
  <button onclick="startGame()">é«˜ä¸­å­¸æ¸¬</button>
  <button onclick="startGame()">è‡ªè¨‚é¡Œç›®</button>
</div>

<div id="game" class="hidden">
  <div id="info"></div>
  <div id="grid"></div>
  <div id="words"></div>
</div>

<div id="result" class="hidden">
  <h2>ğŸ‰ çµç®—ç•«é¢</h2>
  <p>å®Œæˆ 30 é¡Œï¼</p>
  <button onclick="location.reload()">å›é¦–é </button>
</div>

<script>
/* ===== 300 å–®å­—æ± ï¼ˆå…¨å°å¯«ã€ä¸é‡è¤‡ï¼‰===== */
const WORD_POOL = [
"accept","achieve","affect","allow","answer","appear","apply","arrive","attack","avoid",
"balance","behave","believe","benefit","borrow","breathe","cancel","capture","cause","change",
"choose","collect","compare","consider","contain","control","create","decide","deliver","develop",
"discover","discuss","divide","educate","encourage","energy","enjoy","explain","express","feature",
"follow","forgive","govern","happen","imagine","improve","include","increase","inform","inspire",
"introduce","invent","involve","judge","maintain","manage","measure","mention","observe","operate",
"organize","perform","prevent","produce","protect","provide","realize","receive","recognize","reduce",
"reflect","replace","require","respond","result","review","satisfy","schedule","select","separate",
"support","suggest","supply","survive","transfer","transform","understand","value","wonder","achieve",
"advance","analyze","announce","assume","attempt","average","beneficial","capacity","challenge","concept",
"conclude","conduct","conflict","consequence","construct","consume","context","criteria","culture","define",
"demonstrate","derive","detect","economy","element","environment","estimate","evaluate","evidence","factor",
"function","impact","indicate","individual","interpret","issue","justify","method","normal","occur",
"percent","period","perspective","policy","principle","process","project","region","resource","section",
"significant","source","structure","theory","tradition","trend","variable","adapt","adjust","admit","adopt",
"afford","appeal","argue","arrange","assist","attach","attempt","attract","aware","brief","clarify",
"confirm","connect","construct","consult","consume","cooperate","decline","defend","demand","depend",
"deserve","design","destroy","determine","enable","engage","expand","expose","explore","focus","generate",
"identify","illustrate","implement","imply","independent","initiate","invest","maintain","motivate","negotiate",
"participate","predict","preserve","prioritize","propose","recover","regulate","reinforce","reject","reveal",
"secure","shift","stimulate","sustain","terminate","trigger","utilize","valid","withdraw","yield"
];

/* ===== éŠæˆ²é‚è¼¯ ===== */
let questions = [];
let qIndex = 0;

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

function startGame(){
  const pool = shuffle([...WORD_POOL]);
  questions = [];
  for(let i=0;i<30;i++){
    questions.push(pool.slice(i*18,(i+1)*18));
  }
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  qIndex = 0;
  loadQuestion();
}

function loadQuestion(){
  if(qIndex>=30){
    endGame();
    return;
  }
  document.getElementById("info").innerText = `ç¬¬ ${qIndex+1} / 30 é¡Œ`;
  document.getElementById("words").innerText = questions[qIndex].join(" , ");
  buildGrid(questions[qIndex]);
  qIndex++;
}

function buildGrid(words){
  const size=14;
  let grid=Array(size*size).fill("");
  const dirs=[[1,0],[0,1],[1,1]];

  words.forEach(w=>{
    let placed=false;
    while(!placed){
      const [dx,dy]=dirs[Math.floor(Math.random()*3)];
      let x=Math.floor(Math.random()*size);
      let y=Math.floor(Math.random()*size);
      if(x+dx*w.length>=size||y+dy*w.length>=size) continue;
      placed=true;
      for(let i=0;i<w.length;i++){
        grid[(y+i*dy)*size+(x+i*dx)]=w[i];
      }
    }
  });

  for(let i=0;i<grid.length;i++){
    if(!grid[i]) grid[i]=String.fromCharCode(97+Math.floor(Math.random()*26));
  }

  const g=document.getElementById("grid");
  g.innerHTML="";
  grid.forEach(c=>{
    const d=document.createElement("div");
    d.className="cell";
    d.innerText=c;
    g.appendChild(d);
  });
}

function endGame(){
  document.getElementById("game").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
}
</script>

</body>
</html>
