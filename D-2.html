<style>
  /* 麻糬藥丸型 */
  #mochi{
    position:absolute; bottom:0; left:50%; transform:translateX(-50%);
    width:100px; height:60px;
    background:#fff;
    border-radius:50px/30px; /* 藥丸型 */
    box-shadow: inset -8px -8px 16px rgba(255,255,255,.9), inset 6px 6px 14px rgba(200,200,200,.5);
    transition: height .15s ease, transform .2s ease, background .3s ease;
  }
</style>

<script>
  /* 搗麻糬修改：藥丸型 + 罐子填滿 */
  let height=60;
  const maxHeight=200; // 罐子高度
  const mochi=document.getElementById('mochi');
  const hammer=document.getElementById('hammer');
  const voice=document.getElementById('voice');

  function pound(){
    // 增高麻糬
    height=Math.min(height+15,maxHeight);
    mochi.style.height=height+'px';
    mochi.style.borderRadius='50px/30px'; // 藥丸形保持

    // 搖晃
    mochi.style.transform=height>170?'translateX(-50%) rotate(5deg)':'translateX(-50%)';

    // 錘子動畫
    hammer.style.transform='rotate(-25deg)';
    setTimeout(()=>{ hammer.style.transform='rotate(0deg)'; },120);

    // 播放 ASMR
    voice.currentTime=0;
    voice.play().catch(()=>{});

    // 罐子亮起
    if(height>=maxHeight){
      document.getElementById('jar').style.animation='shine 1s infinite alternate';
    }

    // 振動效果（手機）
    if(navigator.vibrate) navigator.vibrate(30);
  }

  document.getElementById('poundBtn').onclick=pound;
  document.addEventListener('keydown',e=>{ if(e.code==='Space'){e.preventDefault(); pound();} });

  // 重置
  document.getElementById('resetBtn').onclick=()=>{
    height=60; mochi.style.height='60px'; mochi.style.transform='translateX(-50%)';
    mochi.style.background='#fff'; document.getElementById('jar').style.animation='none';
  };
</script>
