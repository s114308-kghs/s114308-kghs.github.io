<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>æ‹‰é•·ç™¼å‡ºå•Šè²éŸ³</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #f7f7f7;
    font-family: sans-serif;
  }

  h2 {
    margin-bottom: 10px;
  }

  #mochi {
    width: 120px;
    height: 120px;
    background: pink;
    border-radius: 50%;
    transition: width 0.1s;
  }

  input[type="color"] {
    margin: 15px;
    width: 60px;
    height: 40px;
    border: none;
  }

  p {
    color: #555;
    font-size: 14px;
  }
</style>
</head>
<body>

<h2>ğŸ¡ æ‹‰é•·ç™¼å‡ºã€Œå•Šï½ã€</h2>

<!-- ç¬¬ä¸€æ­¥ï¼šè‡ªè¡ŒæŸ“è‰² -->
<input type="color" id="colorPicker">

<!-- ç‰©ä»¶ -->
<div id="mochi"></div>

<p>ğŸ‘‰ é•·æŒ‰ã€Œç©ºç™½éµã€æ‹‰é•·</p>

<script>
  const mochi = document.getElementById("mochi");
  const colorPicker = document.getElementById("colorPicker");

  // ç¬¬ä¸€æ­¥ï¼šæŸ“è‰²
  colorPicker.addEventListener("input", e => {
    mochi.style.background = e.target.value;
  });

  let isPressing = false;
  let width = 120;

  // è²éŸ³ï¼ˆWeb Audioï¼‰
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  let oscillator = null;

  function startAhSound() {
    oscillator = audioCtx.createOscillator();
    oscillator.type = "sawtooth"; // æ¯”è¼ƒåƒã€Œå•Šã€
    oscillator.frequency.value = 220;
    oscillator.connect(audioCtx.destination);
    oscillator.start();
  }

  function stopAhSound() {
    if (oscillator) {
      oscillator.stop();
      oscillator.disconnect();
      oscillator = null;
    }
  }

  // ç¬¬äºŒã€ä¸‰æ­¥ï¼šé•·æŒ‰ç©ºç™½
  document.addEventListener("keydown", e => {
    if (e.code === "Space" && !isPressing) {
      isPressing = true;
      audioCtx.resume();
      startAhSound();

      stretchInterval = setInterval(() => {
        width += 6;
        mochi.style.width = width + "px";
      }, 60);
    }
  });

  document.addEventListener("keyup", e => {
    if (e.code === "Space") {
      isPressing = false;
      clearInterval(stretchInterval);
      stopAhSound();
    }
  });
</script>

</body>
</html>
